{% extends "smartmin/create.html" %}

{% load smartmin i18n %}
{% load static %}

{% block extra-fields %}
    {{ group_rule_formset.management_form }}

    {% for group_rule_form in group_rule_formset %}
        <div class="group_rule-formset">
            Action
            {{ group_rule_form.action }}
            {% if group_rule_form.action.errors %}
                {% for error in group_rule_form.action.errors %}
                    {{ error|escape }}
                {% endfor %}
            {% endif %}


            Region
            {{ group_rule_form.region }}
            {% if group_rule_form.region.errors %}
                {% for error in group_rule_form.region.errors %}
                    {{ error|escape }}
                {% endfor %}
            {% endif %}

            Condition
            {{ group_rule_form.condition }}
            {% if group_rule_form.condition.errors %}
                {% for error in group_rule_form.condition.errors %}
                    {{ error|escape }}
                {% endfor %}
            {% endif %}

            Threshold
            {{ group_rule_form.threshold }}
            {% if group_rule_form.threshold.errors %}
                {% for error in group_rule_form.threshold.errors %}
                    {{ error|escape }}
                {% endfor %}
            {% endif %}
        </div>
    {% endfor %}

    {% if group_rule_formset.non_form_errors %}
        {% for error in group_rule_formset.non_form_errors %}
            {{ error|escape }}
        {% endfor %}
    {% endif %}
{% endblock %}


{% block extra-script %}
    {{ block.super }}
    <script src="{% static 'js/jquery.formset.js' %}"></script>
    <script>
        $('.group_rule-formset').formset({
            addText: '+ add another group rule',
            deleteText: 'X'
        });
    </script>
{% endblock %}